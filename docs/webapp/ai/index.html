<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI ассистент</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root{--app-bg:#f4f3f2;--app-text:#0f172a;--app-secondary:#e9ecef}
    :root[data-theme="dark"]{--app-bg:#001B24;--app-text:#f8fafc;--app-secondary:#0b2a33}
    body{background:var(--app-bg);color:var(--app-text);font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif}
    .container{padding:16px}
    .btn{padding:8px 12px;font-size:13px}
  </style>
</head>
<body>
  <nav class="navbar" style="background:var(--app-bg);border-bottom:1px solid var(--app-secondary)">
    <div class="container-fluid">
      <a class="navbar-brand d-flex align-items-center gap-2" href="/webapp/"><span class="material-icons">arrow_back</span> Назад</a>
      <span class="navbar-text d-flex align-items-center gap-2"><span class="material-icons">psychology</span> AI ассистент</span>
    </div>
  </nav>
  <div class="container">
    <div class="d-flex flex-wrap gap-2">
      <button class="btn btn-success d-flex align-items-center gap-1" id="start-ai"><span class="material-icons">play_arrow</span> Включить</button>
      <button class="btn btn-danger d-flex align-items-center gap-1" id="stop-ai"><span class="material-icons">stop</span> Выключить</button>
      <button class="btn btn-secondary d-flex align-items-center gap-1" id="ai-stats"><span class="material-icons">insights</span> Статус</button>
      <button class="btn btn-secondary d-flex align-items-center gap-1" id="clear-context"><span class="material-icons">cleaning_services</span> Очистить контекст</button>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const API_BASE_URL = 'https://tgbotgithookv2.onrender.com';
    async function apiCall(endpoint, method='GET'){
      const r = await fetch(`${API_BASE_URL}/api/${endpoint}`, {method});
      if(!r.ok) throw new Error('HTTP '+r.status);
      return r.json();
    }
    document.getElementById('start-ai').onclick=()=>apiCall('ai/start','POST').then(()=>alert('AI включен')).catch(e=>alert(e.message));
    document.getElementById('stop-ai').onclick=()=>apiCall('ai/stop','POST').then(()=>alert('AI выключен')).catch(e=>alert(e.message));
    document.getElementById('ai-stats').onclick=()=>apiCall('ai/status').then(s=>alert(JSON.stringify(s))).catch(e=>alert(e.message));
    document.getElementById('clear-context').onclick=()=>apiCall('ai/clear','POST').then(()=>alert('Очищено')).catch(e=>alert(e.message));
  </script>
</body>
</html>

