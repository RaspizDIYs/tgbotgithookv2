<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Управление ботом</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root{--app-bg:#f4f3f2;--app-text:#0f172a;--app-secondary:#e9ecef}
    :root[data-theme="dark"]{--app-bg:#001B24;--app-text:#f8fafc;--app-secondary:#0b2a33}
    body{background:var(--app-bg);color:var(--app-text);font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif}
    .container{padding:16px}
    .btn{padding:8px 12px;font-size:13px}
  </style>
</head>
<body>
  <nav class="navbar" style="background:var(--app-bg);border-bottom:1px solid var(--app-secondary)">
    <div class="container-fluid">
      <a class="navbar-brand d-flex align-items-center gap-2" href="/webapp/"><span class="material-icons">arrow_back</span> Назад</a>
      <span class="navbar-text d-flex align-items-center gap-2"><span class="material-icons">dashboard_customize</span> Управление ботом</span>
    </div>
  </nav>
  <div class="container">
    <div class="d-flex flex-wrap gap-2">
      <button class="btn btn-secondary d-flex align-items-center gap-1" id="bot-status"><span class="material-icons">monitor_heart</span> Статус бота</button>
      <button class="btn btn-secondary d-flex align-items-center gap-1" id="git-stats"><span class="material-icons">query_stats</span> Git статистика</button>
      <button class="btn btn-secondary d-flex align-items-center gap-1" id="recent-commits"><span class="material-icons">update</span> Обновить коммиты</button>
      <button class="btn btn-secondary d-flex align-items-center gap-1" id="leaderboard"><span class="material-icons">emoji_events</span> Таблица лидеров</button>
    </div>
    <div class="mt-3" id="out"></div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const API_BASE_URL = 'https://tgbotgithookv2.onrender.com';
    async function api(endpoint){const r=await fetch(`${API_BASE_URL}/api/${endpoint}`);if(!r.ok)throw new Error('HTTP '+r.status);return r.json();}
    const out=document.getElementById('out');
    document.getElementById('bot-status').onclick=()=>api('bot/status').then(x=>out.textContent=JSON.stringify(x,null,2)).catch(e=>alert(e.message));
    document.getElementById('git-stats').onclick=()=>api('git/stats').then(x=>out.textContent=JSON.stringify(x,null,2)).catch(e=>alert(e.message));
    document.getElementById('recent-commits').onclick=()=>api('git/commits?limit=5').then(x=>out.textContent=JSON.stringify(x,null,2)).catch(e=>alert(e.message));
    document.getElementById('leaderboard').onclick=()=>api('stats/leaderboard').then(x=>out.textContent=JSON.stringify(x,null,2)).catch(e=>alert(e.message));
  </script>
</body>
</html>

